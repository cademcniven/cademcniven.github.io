<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="A custom Anki note type for studying Japanese. Specifically optimized for sentence mining with Yomichan."><meta name="theme-color" content="#ffffff"><meta name="twitter:dnt" content="on"><meta property="og:title" content="Eminent Note Type V2.4 - Cade's Site &amp; Blog"><meta property="og:site_name" content="Cade's Site &amp; Blog"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://cademcniven.com/projects/notetype2/"><meta property="og:description" content="A custom Anki note type for studying Japanese. Specifically optimized for sentence mining with Yomichan."><link rel="canonical" href="https://cademcniven.com/projects/notetype2/"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><style>:root{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue","ヒラギノ角ゴ Pro W3",Osaka,メイリオ,Meiryo,"ＭＳ Ｐゴシック","MS PGothic","ＭＳ ゴシック","MS Gothic","Noto Sans CJK JP",TakaoPGothic,sans-serif;font-size:23px;line-height:1.6;box-sizing:border-box;--dark-green:#004F2D;--dark-purple:#2F195F;--dark-brown:#251101;--dark-orange:#D65108;--red:#C3423F;--light-brown:#a57548;--light-red:#ff6978;--serif:playfair}html{overflow-x:hidden;-webkit-text-size-adjust:100%}body,html{min-height:100%;margin:0}body{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:center;align-items:stretch;align-content:center}h2,h3,h4,h5,h6{margin:0}h1,h2,h3,h4,h5,h6,p{overflow-wrap:break-word;word-break:break-word}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code{color:var(--red)}header{flex-grow:0;flex-shrink:1;flex-basis:auto;align-self:auto;order:0;margin-left:5%;font-family:var(--serif);width:20%}nav{display:flex;text-align:right;align-items:center;height:100vh;position:sticky;top:0}nav>ul{list-style-type:none;margin:0;padding:0}nav a,nav a:link,nav a:visited{color:#000;display:inline-block;width:fit-content;padding:.5rem}nav a:active,nav a:focus,nav a:hover{text-decoration:underline}main{display:block;flex-grow:1;flex-shrink:1;flex-basis:auto;align-self:auto;order:0;width:80%}#content,.postHeaderContent{max-width:65ch}#content{width:100%;margin:auto;margin-left:15%}aside{float:inline-end;width:40%;padding:1em;border:2px solid var(--dark-orange)}.postHeader{display:flex;position:relative;overflow:hidden;padding-bottom:5ch}.postHeaderBackground{width:170vw;position:absolute;top:0;left:0;bottom:0;right:0;z-index:1}.postHeader h1{line-height:1.4}.postHeaderContentWrapper{display:flex;justify-content:center;width:100vw;z-index:2}.postHeaderContent{padding:10ch 3vw}.postTitle{font-family:var(--serif);font-size:clamp(2rem, 5vw, 300%)}.postTitle span{background-color:#fff}.postDate{font-family:var(--serif);line-height:0;font-weight:700}.postDate span{background-color:#fff}.postDescription{margin-top:3ch}::selection{background:var(--light-red);color:#000}::-moz-selection{background:var(--light-red);color:#000}.tableOfContents{margin-top:3em;font-size:70%;line-height:normal}.toc{display:block;text-align:left;height:auto;position:inherit}.toc ol a{padding:0}.toc a,.toc a:link,.toc a:visited{color:#005ac0}.toc a:focus,.toc a:hover{color:#005ac0}.anchor [hidden]{display:block;text-decoration:underline}.heading-wrapper .anchor{margin-right:.75rem;opacity:60%;order:-1}.heading-wrapper{display:flex;align-items:flex-start;margin-top:1.2rem;margin-bottom:1.2rem}h2+.anchor{font-size:1.5em}h3+.anchor{font-size:1.17em}h4+.anchor{font-size:1em}h5+.anchor{font-size:.83em}#posts>ul{list-style:none;margin-left:0;padding-left:0}.postListTitle{font-size:1.5rem;font-weight:700;font-family:var(--serif)}.postListTitle>a,.postListTitle>a:link,.postListTitle>a:visited{color:#232028}.postListTitle>a:active,.postListTitle>a:focus,.postListTitle>a:hover{color:#000}.postListDescription{padding-left:2ch}.postListDateAndTags{font-size:.75rem}#posts>ul>li{margin-top:3ch}#posts>li:before{content:"\200B";position:absolute}.tag{margin-right:.5ch;text-decoration:underline}a,a:link,a:visited{color:#005ac0;text-decoration:none}a:active,a:focus,a:hover{color:#002249}img{display:block;max-width:100%;height:auto;margin:auto}pre{padding:1rem;max-height:100ch;overflow:auto;tab-size:4;font-size:.5em}blockquote{margin:0;padding-left:1.33em;border-left:3px solid #7a7a7a;font-style:italic;text-align:left}:lang(ja){line-height:150%;letter-spacing:.1em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-style:normal}rt{font-size:.7em}.backlinks-title{margin-bottom:0}.backlinks-container{margin-top:0}.backlinks-default{margin-top:0;margin-left:16px;color:var(--grey)}.backlink__preview{display:none}.backlink{width:fit-content;position:relative}.myFace img{margin-top:3em}@media (max-width:1300px){#content{margin-left:auto}}@media (max-width:1000px){body{flex-direction:column}header{margin-left:0;width:100vw}nav{height:initial;justify-content:center}nav>ul{display:inline-flex}main{width:98%;margin:auto}}code[class*=language-],pre[class*=language-]{color:#ccc;background:0 0;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:.9em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d;border-radius:5px}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}.pattern-checks-sm{background-image:repeating-linear-gradient(45deg,currentColor 25%,transparent 25%,transparent 75%,currentColor 75%,currentColor),repeating-linear-gradient(45deg,currentColor 25%,transparent 25%,transparent 75%,currentColor 75%,currentColor);background-position:0 0,10px 10px;background-size:calc(2 * 10px) calc(2 * 10px)}.pattern-checks-md{background-image:repeating-linear-gradient(45deg,currentColor 25%,transparent 25%,transparent 75%,currentColor 75%,currentColor),repeating-linear-gradient(45deg,currentColor 25%,transparent 25%,transparent 75%,currentColor 75%,currentColor);background-position:0 0,25px 25px;background-size:calc(2 * 25px) calc(2 * 25px)}.pattern-checks-lg{background-image:repeating-linear-gradient(45deg,currentColor 25%,transparent 25%,transparent 75%,currentColor 75%,currentColor),repeating-linear-gradient(45deg,currentColor 25%,transparent 25%,transparent 75%,currentColor 75%,currentColor);background-position:0 0,50px 50px;background-size:calc(2 * 50px) calc(2 * 50px)}.pattern-checks-xl{background-image:repeating-linear-gradient(45deg,currentColor 25%,transparent 25%,transparent 75%,currentColor 75%,currentColor),repeating-linear-gradient(45deg,currentColor 25%,transparent 25%,transparent 75%,currentColor 75%,currentColor);background-position:0 0,100px 100px;background-size:calc(2 * 100px) calc(2 * 100px)}.pattern-grid-sm{background-image:linear-gradient(currentColor 1px,transparent 1px),linear-gradient(to right,currentColor 1px,transparent 1px);background-size:10px 10px}.pattern-grid-md{background-image:linear-gradient(currentColor 1px,transparent 1px),linear-gradient(to right,currentColor 1px,transparent 1px);background-size:25px 25px}.pattern-grid-lg{background-image:linear-gradient(currentColor 1px,transparent 1px),linear-gradient(to right,currentColor 1px,transparent 1px);background-size:50px 50px}.pattern-grid-xl{background-image:linear-gradient(currentColor 1px,transparent 1px),linear-gradient(to right,currentColor 1px,transparent 1px);background-size:100px 100px}.pattern-dots-sm{background-image:radial-gradient(currentColor .5px,transparent .5px);background-size:calc(10 * .5px) calc(10 * .5px)}.pattern-dots-md{background-image:radial-gradient(currentColor 1px,transparent 1px);background-size:calc(10 * 1px) calc(10 * 1px)}.pattern-dots-lg{background-image:radial-gradient(currentColor 1.5px,transparent 1.5px);background-size:calc(10 * 1.5px) calc(10 * 1.5px)}.pattern-dots-xl{background-image:radial-gradient(currentColor 2px,transparent 2px);background-size:calc(10 * 2px) calc(10 * 2px)}.pattern-cross-dots-sm{background-image:radial-gradient(currentColor .5px,transparent .5px),radial-gradient(currentColor .5px,transparent .5px);background-size:calc(20 * .5px) calc(20 * .5px);background-position:0 0,calc(10 * .5px) calc(10 * .5px)}.pattern-cross-dots-md{background-image:radial-gradient(currentColor 1px,transparent 1px),radial-gradient(currentColor 1px,transparent 1px);background-size:calc(20 * 1px) calc(20 * 1px);background-position:0 0,calc(10 * 1px) calc(10 * 1px)}.pattern-cross-dots-lg{background-image:radial-gradient(currentColor 1.5px,transparent 1.5px),radial-gradient(currentColor 1.5px,transparent 1.5px);background-size:calc(20 * 1.5px) calc(20 * 1.5px);background-position:0 0,calc(10 * 1.5px) calc(10 * 1.5px)}.pattern-cross-dots-xl{background-image:radial-gradient(currentColor 2px,transparent 2px),radial-gradient(currentColor 2px,transparent 2px);background-size:calc(20 * 2px) calc(20 * 2px);background-position:0 0,calc(10 * 2px) calc(10 * 2px)}.pattern-vertical-lines-sm{background-image:repeating-linear-gradient(to right,currentColor,currentColor 1px,transparent 1px,transparent);background-size:10px 10px}.pattern-horizontal-lines-sm{background-image:repeating-linear-gradient(0deg,currentColor,currentColor 1px,transparent 1px,transparent);background-size:10px 10px}.pattern-diagonal-lines-sm{background-image:repeating-linear-gradient(45deg,currentColor 0,currentColor 1px,transparent 0,transparent 50%);background-size:10px 10px}.pattern-vertical-lines-md{background-image:repeating-linear-gradient(to right,currentColor,currentColor 1px,transparent 1px,transparent);background-size:25px 25px}.pattern-horizontal-lines-md{background-image:repeating-linear-gradient(0deg,currentColor,currentColor 1px,transparent 1px,transparent);background-size:25px 25px}.pattern-diagonal-lines-md{background-image:repeating-linear-gradient(45deg,currentColor 0,currentColor 1px,transparent 0,transparent 50%);background-size:25px 25px}.pattern-vertical-lines-lg{background-image:repeating-linear-gradient(to right,currentColor,currentColor 1px,transparent 1px,transparent);background-size:50px 50px}.pattern-horizontal-lines-lg{background-image:repeating-linear-gradient(0deg,currentColor,currentColor 1px,transparent 1px,transparent);background-size:50px 50px}.pattern-diagonal-lines-lg{background-image:repeating-linear-gradient(45deg,currentColor 0,currentColor 1px,transparent 0,transparent 50%);background-size:50px 50px}.pattern-vertical-lines-xl{background-image:repeating-linear-gradient(to right,currentColor,currentColor 1px,transparent 1px,transparent);background-size:100px 100px}.pattern-horizontal-lines-xl{background-image:repeating-linear-gradient(0deg,currentColor,currentColor 1px,transparent 1px,transparent);background-size:100px 100px}.pattern-diagonal-lines-xl{background-image:repeating-linear-gradient(45deg,currentColor 0,currentColor 1px,transparent 0,transparent 50%);background-size:100px 100px}.pattern-vertical-stripes-sm{background-image:linear-gradient(90deg,transparent 50%,currentColor 50%);background-size:10px 10px}.pattern-horizontal-stripes-sm{background-image:linear-gradient(0deg,transparent 50%,currentColor 50%);background-size:10px 10px}.pattern-diagonal-stripes-sm{background:repeating-linear-gradient(45deg,transparent,transparent 10px,currentColor 10px,currentColor calc(2 * 10px))}.pattern-vertical-stripes-md{background-image:linear-gradient(90deg,transparent 50%,currentColor 50%);background-size:25px 25px}.pattern-horizontal-stripes-md{background-image:linear-gradient(0deg,transparent 50%,currentColor 50%);background-size:25px 25px}.pattern-diagonal-stripes-md{background:repeating-linear-gradient(45deg,transparent,transparent 25px,currentColor 25px,currentColor calc(2 * 25px))}.pattern-vertical-stripes-lg{background-image:linear-gradient(90deg,transparent 50%,currentColor 50%);background-size:50px 50px}.pattern-horizontal-stripes-lg{background-image:linear-gradient(0deg,transparent 50%,currentColor 50%);background-size:50px 50px}.pattern-diagonal-stripes-lg{background:repeating-linear-gradient(45deg,transparent,transparent 50px,currentColor 50px,currentColor calc(2 * 50px))}.pattern-vertical-stripes-xl{background-image:linear-gradient(90deg,transparent 50%,currentColor 50%);background-size:100px 100px}.pattern-horizontal-stripes-xl{background-image:linear-gradient(0deg,transparent 50%,currentColor 50%);background-size:100px 100px}.pattern-diagonal-stripes-xl{background:repeating-linear-gradient(45deg,transparent,transparent 100px,currentColor 100px,currentColor calc(2 * 100px))}.pattern-zigzag-sm{background:linear-gradient(135deg,currentColor 25%,transparent 25%) -10px 0,linear-gradient(225deg,currentColor 25%,transparent 25%) -10px 0,linear-gradient(315deg,currentColor 25%,transparent 25%),linear-gradient(45deg,currentColor 25%,transparent 25%);background-size:calc(2 * 10px) calc(2 * 10px)}.pattern-zigzag-md{background:linear-gradient(135deg,currentColor 25%,transparent 25%) -25px 0,linear-gradient(225deg,currentColor 25%,transparent 25%) -25px 0,linear-gradient(315deg,currentColor 25%,transparent 25%),linear-gradient(45deg,currentColor 25%,transparent 25%);background-size:calc(2 * 25px) calc(2 * 25px)}.pattern-zigzag-lg{background:linear-gradient(135deg,currentColor 25%,transparent 25%) -50px 0,linear-gradient(225deg,currentColor 25%,transparent 25%) -50px 0,linear-gradient(315deg,currentColor 25%,transparent 25%),linear-gradient(45deg,currentColor 25%,transparent 25%);background-size:calc(2 * 50px) calc(2 * 50px)}.pattern-zigzag-xl{background:linear-gradient(135deg,currentColor 25%,transparent 25%) -100px 0,linear-gradient(225deg,currentColor 25%,transparent 25%) -100px 0,linear-gradient(315deg,currentColor 25%,transparent 25%),linear-gradient(45deg,currentColor 25%,transparent 25%);background-size:calc(2 * 100px) calc(2 * 100px)}.pattern-triangles-sm{background-image:linear-gradient(45deg,currentColor 50%,transparent 50%);background-size:10px 10px}.pattern-triangles-md{background-image:linear-gradient(45deg,currentColor 50%,transparent 50%);background-size:25px 25px}.pattern-triangles-lg{background-image:linear-gradient(45deg,currentColor 50%,transparent 50%);background-size:50px 50px}.pattern-triangles-xl{background-image:linear-gradient(45deg,currentColor 50%,transparent 50%);background-size:100px 100px}.text-pattern{-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}.pattern-w-sm{width:10px}.pattern-h-sm{height:10px}.pattern-w-md{width:25px}.pattern-h-md{height:25px}.pattern-w-lg{width:50px}.pattern-h-lg{height:50px}.pattern-w-xl{width:100px}.pattern-h-xl{height:100px}</style><title>Eminent Note Type V2.4 - Cade's Site &amp; Blog</title></head><body><header><nav><ul><li><a href="/">Posts</a></li><li><a href="/projects/">Projects</a></li><li><a href="/about/">About</a></li></ul></nav></header><main><div class="postHeader"><div class="postHeaderBackground pattern-dots-xl"></div><div class="postHeaderContentWrapper"><div class="postHeaderContent"><h1 class="postTitle"><span>Eminent Note Type V2.4</span></h1></div></div></div><div id="content"><div class="tableOfContents"><h2>Contents</h2><nav class="toc"><ol><li><a href="#features">Features</a></li><li><a href="#how-to-use">How To Use</a></li><li><a href="#explanation-of-fields">Explanation of Fields</a></li><li><a href="#proper-noun-cards">Proper Noun Cards</a></li><li><a href="#pitch-accent-features">Pitch Accent Features</a><ol><li><a href="#pitch-accent-colors">Pitch Accent Colors</a><ol><li><a href="#what-do-the-colors-mean">What Do The Colors Mean?</a></li><li><a href="#how-to-fix-wrong-pitch-color">How To Fix Wrong Pitch Color</a></li></ol></li><li><a href="#pitch-marked-furigana">Pitch-marked Furigana</a></li></ol></li><li><a href="#custom-styling-for-nsfw-images">Custom Styling For NSFW Images</a><ol><li><a href="#choosing-a-style">Choosing a Style</a></li><li><a href="#how-to-mark-a-card-nsfw">How to Mark a Card NSFW</a></li><li><a href="#setting-up-sharex">Setting Up ShareX</a></li></ol></li><li><a href="#yomichan-audio-settings">Yomichan Audio Settings</a></li><li><a href="#yomichan-handlebars">Yomichan Handlebars</a></li><li><a href="#order-cards-by-frequency">Order Cards By Frequency</a></li><li><a href="#migrating-from-previous-versions">Migrating From Previous Versions</a><ol><li><a href="#migrating-from-v23">Migrating From V2.3</a></li><li><a href="#migrating-from-versions-prior-to-v23">Migrating From Versions Prior to V2.3</a></li></ol></li><li><a href="#changelog">Changelog</a></li></ol></nav></div><hr><p>A custom Anki note type for studying Japanese. Specifically optimized for sentence mining with Yomichan.</p><p><em><strong>Updated 02/05/2023</strong></em></p><p>If you're migrating from a previous version version, please see the <a href="#migrating-from-previous-versions">Migration Instructions</a></p><p><a href="#changelog">See what's changed</a></p><hr><p><a href="https://github.com/cademcniven/cademcniven.com-dev/releases/tag/V2.4">Download</a></p><p><picture><source type="image/avif" srcset="/images/card_front-M4BXXShqiw-150w.avif 150w, /images/card_front-M4BXXShqiw-300w.avif 300w, /images/card_front-M4BXXShqiw-450w.avif 450w, /images/card_front-M4BXXShqiw-600w.avif 600w, /images/card_front-M4BXXShqiw-750w.avif 750w, /images/card_front-M4BXXShqiw-900w.avif 900w, /images/card_front-M4BXXShqiw-1050w.avif 1050w, /images/card_front-M4BXXShqiw-1200w.avif 1200w" sizes="100vw"><source type="image/webp" srcset="/images/card_front-M4BXXShqiw-150w.webp 150w, /images/card_front-M4BXXShqiw-300w.webp 300w, /images/card_front-M4BXXShqiw-450w.webp 450w, /images/card_front-M4BXXShqiw-600w.webp 600w, /images/card_front-M4BXXShqiw-750w.webp 750w, /images/card_front-M4BXXShqiw-900w.webp 900w, /images/card_front-M4BXXShqiw-1050w.webp 1050w, /images/card_front-M4BXXShqiw-1200w.webp 1200w" sizes="100vw"><source type="image/png" srcset="/images/card_front-M4BXXShqiw-150w.png 150w, /images/card_front-M4BXXShqiw-300w.png 300w, /images/card_front-M4BXXShqiw-450w.png 450w, /images/card_front-M4BXXShqiw-600w.png 600w, /images/card_front-M4BXXShqiw-750w.png 750w, /images/card_front-M4BXXShqiw-900w.png 900w, /images/card_front-M4BXXShqiw-1050w.png 1050w, /images/card_front-M4BXXShqiw-1200w.png 1200w" sizes="100vw"><source type="image/jpeg" srcset="/images/card_front-M4BXXShqiw-150w.jpeg 150w, /images/card_front-M4BXXShqiw-300w.jpeg 300w, /images/card_front-M4BXXShqiw-450w.jpeg 450w, /images/card_front-M4BXXShqiw-600w.jpeg 600w, /images/card_front-M4BXXShqiw-750w.jpeg 750w, /images/card_front-M4BXXShqiw-900w.jpeg 900w, /images/card_front-M4BXXShqiw-1050w.jpeg 1050w, /images/card_front-M4BXXShqiw-1200w.jpeg 1200w" sizes="100vw"><img src="/images/card_front-M4BXXShqiw-750w.jpeg" width="1200" height="862" alt="front side of the card" loading="lazy" decoding="async"></picture></p><p><picture><source type="image/avif" srcset="/images/card_back-xbXcF4wXEl-150w.avif 150w, /images/card_back-xbXcF4wXEl-300w.avif 300w, /images/card_back-xbXcF4wXEl-450w.avif 450w, /images/card_back-xbXcF4wXEl-600w.avif 600w, /images/card_back-xbXcF4wXEl-750w.avif 750w, /images/card_back-xbXcF4wXEl-900w.avif 900w, /images/card_back-xbXcF4wXEl-1050w.avif 1050w, /images/card_back-xbXcF4wXEl-1200w.avif 1200w" sizes="100vw"><source type="image/webp" srcset="/images/card_back-xbXcF4wXEl-150w.webp 150w, /images/card_back-xbXcF4wXEl-300w.webp 300w, /images/card_back-xbXcF4wXEl-450w.webp 450w, /images/card_back-xbXcF4wXEl-600w.webp 600w, /images/card_back-xbXcF4wXEl-750w.webp 750w, /images/card_back-xbXcF4wXEl-900w.webp 900w, /images/card_back-xbXcF4wXEl-1050w.webp 1050w, /images/card_back-xbXcF4wXEl-1200w.webp 1200w" sizes="100vw"><source type="image/png" srcset="/images/card_back-xbXcF4wXEl-150w.png 150w, /images/card_back-xbXcF4wXEl-300w.png 300w, /images/card_back-xbXcF4wXEl-450w.png 450w, /images/card_back-xbXcF4wXEl-600w.png 600w, /images/card_back-xbXcF4wXEl-750w.png 750w, /images/card_back-xbXcF4wXEl-900w.png 900w, /images/card_back-xbXcF4wXEl-1050w.png 1050w, /images/card_back-xbXcF4wXEl-1200w.png 1200w" sizes="100vw"><source type="image/jpeg" srcset="/images/card_back-xbXcF4wXEl-150w.jpeg 150w, /images/card_back-xbXcF4wXEl-300w.jpeg 300w, /images/card_back-xbXcF4wXEl-450w.jpeg 450w, /images/card_back-xbXcF4wXEl-600w.jpeg 600w, /images/card_back-xbXcF4wXEl-750w.jpeg 750w, /images/card_back-xbXcF4wXEl-900w.jpeg 900w, /images/card_back-xbXcF4wXEl-1050w.jpeg 1050w, /images/card_back-xbXcF4wXEl-1200w.jpeg 1200w" sizes="100vw"><img src="/images/card_back-xbXcF4wXEl-750w.jpeg" width="1200" height="821" alt="back side of the card" loading="lazy" decoding="async"></picture></p><div class="heading-wrapper h2"><h2 id="features">Features</h2><a class="anchor" href="#features" aria-labelledby="features"><span hidden="">#</span></a></div><ul><li><a href="/projects/kanjihover">Kanji Hover</a> on the front and back</li><li>Word/Sentence audio on back with replay buttons overlayed on the image</li><li>Shows dictionary form of the target word at the top, and automatically highlights the conjugated version of the word in the sentence</li><li><strong>*</strong> Shows reading of the target word as furigana, with pitch drops marked</li><li><strong>*</strong> Optional colored box indicates pitch pattern of the word (using 0 javascript)</li><li><strong>*</strong> Whitespace and parenthesis automatically removed from the sentence field</li><li><strong>*</strong> Multiple alternative stylings available for cards with NSFW images</li><li><strong>*</strong> Automatically sort all new cards by their frequency</li><li>Alternative coloring for proper noun cards</li><li>Tested on both desktop and mobile</li></ul><p><strong>*</strong> Points marked with an asterisk require my yomichan settings (contained within the download), see my <a href="#yomichan-handlebars">handlebars</a> changes for more information.</p><div class="heading-wrapper h2"><h2 id="how-to-use">How To Use</h2><a class="anchor" href="#how-to-use" aria-labelledby="how-to-use"><span hidden="">#</span></a></div><ol><li>Click the <a href="https://github.com/cademcniven/cademcniven.com-dev/releases/tag/V2.4">download</a> link and open the .apkg file. It should have imported a deck (with 1 card) into Anki. You can immediately delete this deck if you want, but sharing decks is currently the only way to share note types. Now you should have a note type called EminentV2.4.</li><li>Import my Yomichan settings (alternatively you can just copy my <a href="https://gist.github.com/cademcniven/dde2597e759ab2c9ab17a4deac673f33">handlebars</a> and <a href="#explanation-of-fields">Anki card configuration settings</a>)<ol><li>You'll also want to update your <a href="#yomichan-audio-settings">audio settings</a></li></ol></li><li>Set up Anki to <a href="#order-cards-by-frequency">auto reorder cards by frequency</a></li><li>If you're going to be mining from VNs, <a href="#setting-up-sharex">set up ShareX</a></li><li>Optionally choose a <a href="#custom-styling-for-nsfw-images">custom style for NSFW images</a></li><li>That's it! Start mining :)</li></ol><div class="heading-wrapper h2"><h2 id="explanation-of-fields">Explanation of Fields</h2><a class="anchor" href="#explanation-of-fields" aria-labelledby="explanation-of-fields"><span hidden="">#</span></a></div><p>Pretty much all fields are optional, so just use the ones that you have the data for.</p><ul><li><strong>wordDictionaryForm</strong><ul><li>This is the dictionary form of the word. It will appear separate from the sentence at the top of the card.</li><li>In yomichan put <code>{expression}</code> here</li></ul></li><li><strong>sentence</strong><ul><li>In yomichan put <code>{cloze-prefix}&lt;span class="highlight"&gt;{cloze-body}&lt;/span&gt;{cloze-suffix}</code> here</li></ul></li><li><strong>reading</strong><ul><li>This is for the kana form of the target word. This field will be displayed as furigana, with pitch drops marked.</li><li>In yomichan put <code>{pitch-accents}</code> here</li><li>If you don't want pitch drops marked, put <code>{reading}</code> instead.</li></ul></li><li><strong>definition</strong><ul><li>In yomichan put <code>{glossary-brief}</code> here</li></ul></li><li><strong>wordAudio</strong><ul><li>Audio that corresponds to <em><strong>wordDictionaryForm</strong></em>.</li><li>In yomichan put <code>{audio}</code> here</li></ul></li><li><strong>sentenceAudio</strong><ul><li>Audio that corresponds to <em><strong>sentence</strong></em>.</li><li>In yomichan this will be blank, and it will have to be added from another source.</li></ul></li><li><strong>picture</strong><ul><li>In yomichan this will be blank, and it will have to be added from another source. Depending on your mining setup, you may put <code>{clipboard-image}</code> here.</li></ul></li><li><strong>pitchAccent</strong><ul><li>The pitch accent graph of <em><strong>wordDictionaryForm</strong></em>.</li><li>In yomichan put <code>{pitch-accent-graphs}</code> here</li></ul></li><li><strong>frequency</strong><ul><li>Rarity of <em><strong>wordDictionaryForm</strong></em> according to some frequency list(s).</li><li>In yomichan put <code>{freq}</code> here</li></ul></li></ul><div class="heading-wrapper h2"><h2 id="proper-noun-cards">Proper Noun Cards</h2><a class="anchor" href="#proper-noun-cards" aria-labelledby="proper-noun-cards"><span hidden="">#</span></a></div><p>For those who would like to learn to read proper nouns through mining rather than the <a href="https://ankiweb.net/shared/info/3885156604">proper nouns deck</a>, I've overridden the <strong>bold</strong> styling on the card to change the color of text. This means, whenever you mine a proper noun, you can simply make the <strong>wordDictionaryForm</strong> bold, and the color of the word on the card will change to yellow. This will indicate that you only need to test yourself on the reading, not the meaning.</p><p><picture><source type="image/avif" srcset="/images/proper_noun-EyJZLEisFv-150w.avif 150w, /images/proper_noun-EyJZLEisFv-300w.avif 300w, /images/proper_noun-EyJZLEisFv-450w.avif 450w, /images/proper_noun-EyJZLEisFv-600w.avif 600w, /images/proper_noun-EyJZLEisFv-750w.avif 750w, /images/proper_noun-EyJZLEisFv-900w.avif 900w, /images/proper_noun-EyJZLEisFv-1050w.avif 1050w, /images/proper_noun-EyJZLEisFv-1200w.avif 1200w" sizes="100vw"><source type="image/webp" srcset="/images/proper_noun-EyJZLEisFv-150w.webp 150w, /images/proper_noun-EyJZLEisFv-300w.webp 300w, /images/proper_noun-EyJZLEisFv-450w.webp 450w, /images/proper_noun-EyJZLEisFv-600w.webp 600w, /images/proper_noun-EyJZLEisFv-750w.webp 750w, /images/proper_noun-EyJZLEisFv-900w.webp 900w, /images/proper_noun-EyJZLEisFv-1050w.webp 1050w, /images/proper_noun-EyJZLEisFv-1200w.webp 1200w" sizes="100vw"><source type="image/png" srcset="/images/proper_noun-EyJZLEisFv-150w.png 150w, /images/proper_noun-EyJZLEisFv-300w.png 300w, /images/proper_noun-EyJZLEisFv-450w.png 450w, /images/proper_noun-EyJZLEisFv-600w.png 600w, /images/proper_noun-EyJZLEisFv-750w.png 750w, /images/proper_noun-EyJZLEisFv-900w.png 900w, /images/proper_noun-EyJZLEisFv-1050w.png 1050w, /images/proper_noun-EyJZLEisFv-1200w.png 1200w" sizes="100vw"><source type="image/jpeg" srcset="/images/proper_noun-EyJZLEisFv-150w.jpeg 150w, /images/proper_noun-EyJZLEisFv-300w.jpeg 300w, /images/proper_noun-EyJZLEisFv-450w.jpeg 450w, /images/proper_noun-EyJZLEisFv-600w.jpeg 600w, /images/proper_noun-EyJZLEisFv-750w.jpeg 750w, /images/proper_noun-EyJZLEisFv-900w.jpeg 900w, /images/proper_noun-EyJZLEisFv-1050w.jpeg 1050w, /images/proper_noun-EyJZLEisFv-1200w.jpeg 1200w" sizes="100vw"><img src="/images/proper_noun-EyJZLEisFv-750w.jpeg" width="1200" height="820" alt="front side of the card with proper noun highlighting" loading="lazy" decoding="async"></picture></p><p>Of course, even if you aren't mining proper nouns, this feature may also be useful for cards that have many definitions, and you want to focus on only one or two.</p><p><picture><source type="image/avif" srcset="/images/highlighted_definition-k9LMJk0LUH-150w.avif 150w, /images/highlighted_definition-k9LMJk0LUH-300w.avif 300w, /images/highlighted_definition-k9LMJk0LUH-450w.avif 450w, /images/highlighted_definition-k9LMJk0LUH-600w.avif 600w, /images/highlighted_definition-k9LMJk0LUH-750w.avif 750w, /images/highlighted_definition-k9LMJk0LUH-900w.avif 900w, /images/highlighted_definition-k9LMJk0LUH-1050w.avif 1050w, /images/highlighted_definition-k9LMJk0LUH-1200w.avif 1200w" sizes="100vw"><source type="image/webp" srcset="/images/highlighted_definition-k9LMJk0LUH-150w.webp 150w, /images/highlighted_definition-k9LMJk0LUH-300w.webp 300w, /images/highlighted_definition-k9LMJk0LUH-450w.webp 450w, /images/highlighted_definition-k9LMJk0LUH-600w.webp 600w, /images/highlighted_definition-k9LMJk0LUH-750w.webp 750w, /images/highlighted_definition-k9LMJk0LUH-900w.webp 900w, /images/highlighted_definition-k9LMJk0LUH-1050w.webp 1050w, /images/highlighted_definition-k9LMJk0LUH-1200w.webp 1200w" sizes="100vw"><source type="image/png" srcset="/images/highlighted_definition-k9LMJk0LUH-150w.png 150w, /images/highlighted_definition-k9LMJk0LUH-300w.png 300w, /images/highlighted_definition-k9LMJk0LUH-450w.png 450w, /images/highlighted_definition-k9LMJk0LUH-600w.png 600w, /images/highlighted_definition-k9LMJk0LUH-750w.png 750w, /images/highlighted_definition-k9LMJk0LUH-900w.png 900w, /images/highlighted_definition-k9LMJk0LUH-1050w.png 1050w, /images/highlighted_definition-k9LMJk0LUH-1200w.png 1200w" sizes="100vw"><source type="image/jpeg" srcset="/images/highlighted_definition-k9LMJk0LUH-150w.jpeg 150w, /images/highlighted_definition-k9LMJk0LUH-300w.jpeg 300w, /images/highlighted_definition-k9LMJk0LUH-450w.jpeg 450w, /images/highlighted_definition-k9LMJk0LUH-600w.jpeg 600w, /images/highlighted_definition-k9LMJk0LUH-750w.jpeg 750w, /images/highlighted_definition-k9LMJk0LUH-900w.jpeg 900w, /images/highlighted_definition-k9LMJk0LUH-1050w.jpeg 1050w, /images/highlighted_definition-k9LMJk0LUH-1200w.jpeg 1200w" sizes="100vw"><img src="/images/highlighted_definition-k9LMJk0LUH-750w.jpeg" width="1200" height="819" alt="back side of the card with definition highlighting" loading="lazy" decoding="async"></picture></p><div class="heading-wrapper h2"><h2 id="pitch-accent-features">Pitch Accent Features</h2><a class="anchor" href="#pitch-accent-features" aria-labelledby="pitch-accent-features"><span hidden="">#</span></a></div><p><strong>This will only work using my Yomichan export settings</strong></p><div class="heading-wrapper h3"><h3 id="pitch-accent-colors">Pitch Accent Colors</h3><a class="anchor" href="#pitch-accent-colors" aria-labelledby="pitch-accent-colors"><span hidden="">#</span></a></div><p>If you choose to have it enabled, this note type supports color coding your target word based on the system popularized by MIA/Migaku. Rather than coloring the entire word, this note will put a square next to the word that is the color of the pitch pattern.</p><p>The pitch accent styling is highly customizable, and even toggleable if you would prefer not to have it at all. Thus, I thought it warranted a bit of explanation so you can edit it to fit your preferences.</p><p>Using my template settings, Yomichan will export the dictionary form of the word wrapped in a span with one of the following classes:</p><ul><li>.heiban</li><li>.atamadaka</li><li>.nakadaka</li><li>.odaka</li><li>.kifuku</li></ul><p>For example, it might look like this:</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>heiban<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>平日<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></code></pre><p>By default, I have the following CSS on the note type:</p><pre class="language-css"><code class="language-css"><span class="token comment">/****** colors ******/</span><br><span class="token selector">:root</span> <span class="token punctuation">{</span><br>	<span class="token property">--red</span><span class="token punctuation">:</span> #fd5c5c<span class="token punctuation">;</span><br>	<span class="token property">--blue</span><span class="token punctuation">:</span> #89daff<span class="token punctuation">;</span><br>	<span class="token property">--orange</span><span class="token punctuation">:</span> #fca311<span class="token punctuation">;</span><br>	<span class="token property">--green</span><span class="token punctuation">:</span> #4e937a<span class="token punctuation">;</span><br>	<span class="token property">--purple</span><span class="token punctuation">:</span> #afa2ff<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/****** pitch accent colors ******/</span><br><span class="token selector">.pitch .heiban::before</span> <span class="token punctuation">{</span><br>	<span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span><br>	<span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>	<span class="token property">height</span><span class="token punctuation">:</span> 0.7ch<span class="token punctuation">;</span><br>	<span class="token property">width</span><span class="token punctuation">:</span> 0.7ch<span class="token punctuation">;</span><br>	<span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span><br>	<span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.3ch<span class="token punctuation">;</span><br>	<span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--blue<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.pitch .atamadaka::before</span> <span class="token punctuation">{</span><br>	<span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span><br>	<span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>	<span class="token property">height</span><span class="token punctuation">:</span> 0.7ch<span class="token punctuation">;</span><br>	<span class="token property">width</span><span class="token punctuation">:</span> 0.7ch<span class="token punctuation">;</span><br>	<span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span><br>	<span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.3ch<span class="token punctuation">;</span><br>	<span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--red<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.pitch .nakadaka::before</span> <span class="token punctuation">{</span><br>	<span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span><br>	<span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>	<span class="token property">height</span><span class="token punctuation">:</span> 0.7ch<span class="token punctuation">;</span><br>	<span class="token property">width</span><span class="token punctuation">:</span> 0.7ch<span class="token punctuation">;</span><br>	<span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span><br>	<span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.3ch<span class="token punctuation">;</span><br>	<span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--orange<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.pitch .odaka::before</span> <span class="token punctuation">{</span><br>	<span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span><br>	<span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>	<span class="token property">height</span><span class="token punctuation">:</span> 0.7ch<span class="token punctuation">;</span><br>	<span class="token property">width</span><span class="token punctuation">:</span> 0.7ch<span class="token punctuation">;</span><br>	<span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span><br>	<span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.3ch<span class="token punctuation">;</span><br>	<span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--green<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.pitch .kifuku::before</span> <span class="token punctuation">{</span><br>	<span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span><br>	<span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>	<span class="token property">height</span><span class="token punctuation">:</span> 0.7ch<span class="token punctuation">;</span><br>	<span class="token property">width</span><span class="token punctuation">:</span> 0.7ch<span class="token punctuation">;</span><br>	<span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span><br>	<span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.3ch<span class="token punctuation">;</span><br>	<span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--purple<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>If you want to change the colors, you can just change the hex code inside of <code>:root</code>.</p><p>The color I chose for each pitch pattern is the same as Migaku Japanese, so if you're already used to their system you won't need to re-learn another. If you want to use different colors for the various pitch patterns, just change which variable is used. For example, change <code>var(--green)</code> to <code>var(--blue)</code>, etc.</p><p>If you don't want pitch coloring at all, you can just remove the <code>pitch</code> class from the front/back template.</p><p>If you want to enable pitch coloring on the front of the card, you can add the <code>pitch</code> class.</p><p>More info is available in comments inside the note template.</p><p>Since the word is simply tagged with a class based on pitch, you're not limited to just colors for styling, you can use <a href="https://www.w3schools.com/css/">any css</a> on it. Feel free to get creative.</p><div class="heading-wrapper h4"><h4 id="what-do-the-colors-mean">What Do The Colors Mean?</h4><a class="anchor" href="#what-do-the-colors-mean" aria-labelledby="what-do-the-colors-mean"><span hidden="">#</span></a></div><p>I used to link to the Migaku documentation that explained their pitch accent coloring system, but since they removed that page, I'll throw the chart here in case anyone's confused:</p><ul><li>heiban: blue</li><li>atamadaka: red</li><li>nakadaka: orange</li><li>odaka: green</li><li>kifuku: purple</li></ul><div class="heading-wrapper h4"><h4 id="how-to-fix-wrong-pitch-color">How To Fix Wrong Pitch Color</h4><a class="anchor" href="#how-to-fix-wrong-pitch-color" aria-labelledby="how-to-fix-wrong-pitch-color"><span hidden="">#</span></a></div><p>If you look at the <code>{pitchAccent}</code> field of the card, you may see more than one pitch graph. If you want to change the furigana pitch pattern to match one of the others on the list, you can do so by following these steps:</p><ol><li>Go to the card you want to edit in the card browser</li><li>Click on the <code>{wordDictionaryForm}</code> field</li><li>Click on this button to edit the field in HTML mode <picture><source type="image/avif" srcset="/images/edit_html_button-S-2jK8cuI2-27w.avif 27w" sizes="100vw"><source type="image/webp" srcset="/images/edit_html_button-S-2jK8cuI2-27w.webp 27w" sizes="100vw"><source type="image/png" srcset="/images/edit_html_button-S-2jK8cuI2-27w.png 27w" sizes="100vw"><source type="image/jpeg" srcset="/images/edit_html_button-S-2jK8cuI2-27w.jpeg 27w" sizes="100vw"><img src="/images/edit_html_button-S-2jK8cuI2-27w.jpeg" width="27" height="28" alt="edit html button" loading="lazy" decoding="async"></picture></li><li>Edit the class name to be the name of the pitch pattern you want it to be</li></ol><p><picture><source type="image/avif" srcset="/images/field_pitch_pattern-9ot2jwvNAh-150w.avif 150w, /images/field_pitch_pattern-9ot2jwvNAh-300w.avif 300w" sizes="100vw"><source type="image/webp" srcset="/images/field_pitch_pattern-9ot2jwvNAh-150w.webp 150w, /images/field_pitch_pattern-9ot2jwvNAh-300w.webp 300w" sizes="100vw"><source type="image/png" srcset="/images/field_pitch_pattern-9ot2jwvNAh-150w.png 150w, /images/field_pitch_pattern-9ot2jwvNAh-300w.png 300w" sizes="100vw"><source type="image/jpeg" srcset="/images/field_pitch_pattern-9ot2jwvNAh-150w.jpeg 150w, /images/field_pitch_pattern-9ot2jwvNAh-300w.jpeg 300w" sizes="100vw"><img src="/images/field_pitch_pattern-9ot2jwvNAh-300w.jpeg" width="300" height="55" alt="anki field in html mode" loading="lazy" decoding="async"></picture></p><div class="heading-wrapper h3"><h3 id="pitch-marked-furigana">Pitch-marked Furigana</h3><a class="anchor" href="#pitch-marked-furigana" aria-labelledby="pitch-marked-furigana"><span hidden="">#</span></a></div><p>It's possible for words to have multiple correct pitch patterns, and there's no way for my note type to automatically know which pattern is used in the sentence you mined. Therefore, by default, the card will show the first pitch pattern on the list of correct patterns.</p><p>If your dictionary has no pitch entry for the word, it will just show the plain furigana.</p><p>If you look at the <code>{pitchAccent}</code> field of the card, you may see more than one pitch graph. If you want to change the furigana pitch pattern to match one of the others on the list, you can do so by following these steps:</p><ol><li>Go to the card you want to edit in the card browser</li><li>Click on the <code>{reading}</code> field</li><li>Click on this button to edit the field in HTML mode <picture><source type="image/avif" srcset="/images/edit_html_button-S-2jK8cuI2-27w.avif 27w" sizes="100vw"><source type="image/webp" srcset="/images/edit_html_button-S-2jK8cuI2-27w.webp 27w" sizes="100vw"><source type="image/png" srcset="/images/edit_html_button-S-2jK8cuI2-27w.png 27w" sizes="100vw"><source type="image/jpeg" srcset="/images/edit_html_button-S-2jK8cuI2-27w.jpeg 27w" sizes="100vw"><img src="/images/edit_html_button-S-2jK8cuI2-27w.jpeg" width="27" height="28" alt="edit html button" loading="lazy" decoding="async"></picture></li><li>The field will be an <code>&lt;ol&gt;</code> containing several <code>&lt;li&gt;</code>. By default, the card will show only the first <code>&lt;li&gt;</code>, so you'll want to delete any <code>&lt;li&gt;</code> that are above the pattern you want</li></ol><p><picture><source type="image/avif" srcset="/images/html_mode-XlSssGI1ll-150w.avif 150w, /images/html_mode-XlSssGI1ll-300w.avif 300w, /images/html_mode-XlSssGI1ll-450w.avif 450w, /images/html_mode-XlSssGI1ll-600w.avif 600w, /images/html_mode-XlSssGI1ll-750w.avif 750w" sizes="100vw"><source type="image/webp" srcset="/images/html_mode-XlSssGI1ll-150w.webp 150w, /images/html_mode-XlSssGI1ll-300w.webp 300w, /images/html_mode-XlSssGI1ll-450w.webp 450w, /images/html_mode-XlSssGI1ll-600w.webp 600w, /images/html_mode-XlSssGI1ll-750w.webp 750w" sizes="100vw"><source type="image/png" srcset="/images/html_mode-XlSssGI1ll-150w.png 150w, /images/html_mode-XlSssGI1ll-300w.png 300w, /images/html_mode-XlSssGI1ll-450w.png 450w, /images/html_mode-XlSssGI1ll-600w.png 600w, /images/html_mode-XlSssGI1ll-750w.png 750w" sizes="100vw"><source type="image/jpeg" srcset="/images/html_mode-XlSssGI1ll-150w.jpeg 150w, /images/html_mode-XlSssGI1ll-300w.jpeg 300w, /images/html_mode-XlSssGI1ll-450w.jpeg 450w, /images/html_mode-XlSssGI1ll-600w.jpeg 600w, /images/html_mode-XlSssGI1ll-750w.jpeg 750w" sizes="100vw"><img src="/images/html_mode-XlSssGI1ll-450w.jpeg" width="750" height="474" alt="anki field in html mode" loading="lazy" decoding="async"></picture></p><p><picture><source type="image/avif" srcset="/images/li_to_remove-1vTNq4KaGs-150w.avif 150w, /images/li_to_remove-1vTNq4KaGs-300w.avif 300w, /images/li_to_remove-1vTNq4KaGs-450w.avif 450w, /images/li_to_remove-1vTNq4KaGs-600w.avif 600w, /images/li_to_remove-1vTNq4KaGs-750w.avif 750w" sizes="100vw"><source type="image/webp" srcset="/images/li_to_remove-1vTNq4KaGs-150w.webp 150w, /images/li_to_remove-1vTNq4KaGs-300w.webp 300w, /images/li_to_remove-1vTNq4KaGs-450w.webp 450w, /images/li_to_remove-1vTNq4KaGs-600w.webp 600w, /images/li_to_remove-1vTNq4KaGs-750w.webp 750w" sizes="100vw"><source type="image/png" srcset="/images/li_to_remove-1vTNq4KaGs-150w.png 150w, /images/li_to_remove-1vTNq4KaGs-300w.png 300w, /images/li_to_remove-1vTNq4KaGs-450w.png 450w, /images/li_to_remove-1vTNq4KaGs-600w.png 600w, /images/li_to_remove-1vTNq4KaGs-750w.png 750w" sizes="100vw"><source type="image/jpeg" srcset="/images/li_to_remove-1vTNq4KaGs-150w.jpeg 150w, /images/li_to_remove-1vTNq4KaGs-300w.jpeg 300w, /images/li_to_remove-1vTNq4KaGs-450w.jpeg 450w, /images/li_to_remove-1vTNq4KaGs-600w.jpeg 600w, /images/li_to_remove-1vTNq4KaGs-750w.jpeg 750w" sizes="100vw"><img src="/images/li_to_remove-1vTNq4KaGs-450w.jpeg" width="750" height="470" alt="highlight showing which part of the code to remove" loading="lazy" decoding="async"></picture></p><p>If you didn't understand anything I just said, it's probably best to not mess with it. Or maybe it's time to turn your life around and <a href="https://www.freecodecamp.org/">learn html</a>? You do you.</p><div class="heading-wrapper h2"><h2 id="custom-styling-for-nsfw-images">Custom Styling For NSFW Images</h2><a class="anchor" href="#custom-styling-for-nsfw-images" aria-labelledby="custom-styling-for-nsfw-images"><span hidden="">#</span></a></div><div class="heading-wrapper h3"><h3 id="choosing-a-style">Choosing a Style</h3><a class="anchor" href="#choosing-a-style" aria-labelledby="choosing-a-style"><span hidden="">#</span></a></div><p>My note type comes with several options for applying custom styles to NSFW images. The code for this is modified from <a href="https://github.com/MarvNC/JP-Resources#anki-card-blur">Marv's NSFW Blur</a>.</p><p>It is all done without Javascript.</p><p>Before getting into the options you have, here's a preview of what a NSFW blur looks like.</p><p>Without Blur:</p><p><picture><source type="image/avif" srcset="/images/no_blur-jqRfMKyBzA-150w.avif 150w, /images/no_blur-jqRfMKyBzA-300w.avif 300w, /images/no_blur-jqRfMKyBzA-450w.avif 450w, /images/no_blur-jqRfMKyBzA-600w.avif 600w, /images/no_blur-jqRfMKyBzA-750w.avif 750w" sizes="100vw"><source type="image/webp" srcset="/images/no_blur-jqRfMKyBzA-150w.webp 150w, /images/no_blur-jqRfMKyBzA-300w.webp 300w, /images/no_blur-jqRfMKyBzA-450w.webp 450w, /images/no_blur-jqRfMKyBzA-600w.webp 600w, /images/no_blur-jqRfMKyBzA-750w.webp 750w" sizes="100vw"><source type="image/png" srcset="/images/no_blur-jqRfMKyBzA-150w.png 150w, /images/no_blur-jqRfMKyBzA-300w.png 300w, /images/no_blur-jqRfMKyBzA-450w.png 450w, /images/no_blur-jqRfMKyBzA-600w.png 600w, /images/no_blur-jqRfMKyBzA-750w.png 750w" sizes="100vw"><source type="image/jpeg" srcset="/images/no_blur-jqRfMKyBzA-150w.jpeg 150w, /images/no_blur-jqRfMKyBzA-300w.jpeg 300w, /images/no_blur-jqRfMKyBzA-450w.jpeg 450w, /images/no_blur-jqRfMKyBzA-600w.jpeg 600w, /images/no_blur-jqRfMKyBzA-750w.jpeg 750w" sizes="100vw"><img src="/images/no_blur-jqRfMKyBzA-450w.jpeg" width="750" height="647" alt="card without blur" loading="lazy" decoding="async"></picture></p><p>With Blur:</p><p><picture><source type="image/avif" srcset="/images/blur-KmP1wBYY7W-150w.avif 150w, /images/blur-KmP1wBYY7W-300w.avif 300w, /images/blur-KmP1wBYY7W-450w.avif 450w, /images/blur-KmP1wBYY7W-600w.avif 600w, /images/blur-KmP1wBYY7W-750w.avif 750w" sizes="100vw"><source type="image/webp" srcset="/images/blur-KmP1wBYY7W-150w.webp 150w, /images/blur-KmP1wBYY7W-300w.webp 300w, /images/blur-KmP1wBYY7W-450w.webp 450w, /images/blur-KmP1wBYY7W-600w.webp 600w, /images/blur-KmP1wBYY7W-750w.webp 750w" sizes="100vw"><source type="image/png" srcset="/images/blur-KmP1wBYY7W-150w.png 150w, /images/blur-KmP1wBYY7W-300w.png 300w, /images/blur-KmP1wBYY7W-450w.png 450w, /images/blur-KmP1wBYY7W-600w.png 600w, /images/blur-KmP1wBYY7W-750w.png 750w" sizes="100vw"><source type="image/jpeg" srcset="/images/blur-KmP1wBYY7W-150w.jpeg 150w, /images/blur-KmP1wBYY7W-300w.jpeg 300w, /images/blur-KmP1wBYY7W-450w.jpeg 450w, /images/blur-KmP1wBYY7W-600w.jpeg 600w, /images/blur-KmP1wBYY7W-750w.jpeg 750w" sizes="100vw"><img src="/images/blur-KmP1wBYY7W-450w.jpeg" width="750" height="640" alt="card with blur" loading="lazy" decoding="async"></picture></p><p>This feature is mostly useful for repping your cards on mobile, in case there are certain images you'd prefer people not be able to see on your phone.</p><p>My note type comes with 3 options for cards with NSFW images:</p><ol><li>NSFW images display on desktop, but are hidden on mobile (default)</li><li>NSFW images are blurred on both desktop and mobile, and can be viewed by hovering/tapping the image</li><li>NSFW images display on desktop, but are blurred on mobile (and can be viewed by tapping the image)</li></ol><p>You can switch between these 3 options by going to the card styling, scrolling to the very bottom, and following the instructions there.</p><div class="heading-wrapper h3"><h3 id="how-to-mark-a-card-nsfw">How to Mark a Card NSFW</h3><a class="anchor" href="#how-to-mark-a-card-nsfw" aria-labelledby="how-to-mark-a-card-nsfw"><span hidden="">#</span></a></div><p>The NSFW image styling is based on your card tags. So in order to get this effect, all you need to do is add the tag <code>NSFW</code> to your card. Easy as that!</p><p>However, we can streamline this process a bit by adding a custom ShareX hotkey that automatically adds an image + the tag to the card.</p><div class="heading-wrapper h3"><h3 id="setting-up-sharex">Setting Up ShareX</h3><a class="anchor" href="#setting-up-sharex" aria-labelledby="setting-up-sharex"><span hidden="">#</span></a></div><p>Most of the ShareX settings come from the <a href="https://rentry.co/mining">rentry mining setup</a>. Some of the instructions below come from <a href="https://rentry.co/lazyXel#sharex">Xelieu's Lazy Guide</a>. You can follow these guides instead if you want to, but they need extra config in order to work with my note type. For that reason, I've paraphrased those to try to make the process as easy as possible for my specific note type.</p><p>For a quick and easy setup, you can just copy my ShareX settings (provided in the download). Simply drag these files into your <code>documents/ShareX</code> folder (assuming you have ShareX downloaded already).</p><p>If you your Anki profile is named something other than the default <code>User 1</code>, you'll also need to update the paths for the <code>VN Image</code> and <code>NSFW VN Image</code> buttons. You can do that by doing to <code>Hotkey Settings &gt; screenshot/nsfw/audio &gt;override screenshot folder</code> and changing the path name <code>%ApplicationData%\Anki2\**YourAnkiProfileName**\collection.media</code>.</p><p>This is unrelated to the NSFW blur, but if you ever want ShareX to record audio you'll also need to do the following:</p><ol><li>Go to <code>Hotkey settings &gt; screen recorder &gt; screen recorder options</code></li><li>Make sure you have FFmpeg downloaded and installed</li><li>Install recorder devices</li><li>Video source: none</li><li>Audio source: virtual-audio-capturer</li></ol><p>If everything went well you should have the following hotkeys:</p><p><picture><source type="image/avif" srcset="/images/sharex_hotkey_settings-p20978I58K-150w.avif 150w, /images/sharex_hotkey_settings-p20978I58K-300w.avif 300w, /images/sharex_hotkey_settings-p20978I58K-450w.avif 450w, /images/sharex_hotkey_settings-p20978I58K-600w.avif 600w" sizes="100vw"><source type="image/webp" srcset="/images/sharex_hotkey_settings-p20978I58K-150w.webp 150w, /images/sharex_hotkey_settings-p20978I58K-300w.webp 300w, /images/sharex_hotkey_settings-p20978I58K-450w.webp 450w, /images/sharex_hotkey_settings-p20978I58K-600w.webp 600w" sizes="100vw"><source type="image/png" srcset="/images/sharex_hotkey_settings-p20978I58K-150w.png 150w, /images/sharex_hotkey_settings-p20978I58K-300w.png 300w, /images/sharex_hotkey_settings-p20978I58K-450w.png 450w, /images/sharex_hotkey_settings-p20978I58K-600w.png 600w" sizes="100vw"><source type="image/jpeg" srcset="/images/sharex_hotkey_settings-p20978I58K-150w.jpeg 150w, /images/sharex_hotkey_settings-p20978I58K-300w.jpeg 300w, /images/sharex_hotkey_settings-p20978I58K-450w.jpeg 450w, /images/sharex_hotkey_settings-p20978I58K-600w.jpeg 600w" sizes="100vw"><img src="/images/sharex_hotkey_settings-p20978I58K-450w.jpeg" width="600" height="168" alt="sharex hotkeys" loading="lazy" decoding="async"></picture></p><ul><li><code>ctrl+shift+c</code> is for normal screenshots</li><li><code>alt+c</code> will take a screenshot, save it to your anki media folder, and add it to your last created card. This hotkey was specifically chosen because shift generally skips text in visual novels.</li><li><code>alt+n</code> will take a screenshot, save it to your anki media folder, add it to your last created card, and add the <code>NSFW</code> tag to that card.</li><li><code>alt+a</code> will record audio, save it to your anki media folder, and add it to your last created card.</li></ul><div class="heading-wrapper h2"><h2 id="yomichan-audio-settings">Yomichan Audio Settings</h2><a class="anchor" href="#yomichan-audio-settings" aria-labelledby="yomichan-audio-settings"><span hidden="">#</span></a></div><p>If you used my Yomichan settings, you may have some trouble with your audio. This is because my settings use the <a href="https://github.com/Aquafina-water-bottle/jmdict-english-yomichan/tree/sql_09/local_audio">local audio server</a>. You can either follow the instructions from that link to set it up (I recommend it), or alternatively, update your Yomichan audio sources to be Jpod, Jpod101, Jisho (in that order).</p><p>Note that my yomichan settings use multiple profiles, so you'll want to make that change to every profile you plan on using.</p><div class="heading-wrapper h2"><h2 id="yomichan-handlebars">Yomichan Handlebars</h2><a class="anchor" href="#yomichan-handlebars" aria-labelledby="yomichan-handlebars"><span hidden="">#</span></a></div><p>The features of this note type make use of custom yomichan handlebars. In case you don't want to completely import my yomichan settings, you can just copy <a href="https://gist.github.com/cademcniven/dde2597e759ab2c9ab17a4deac673f33">my handlebars</a>.</p><p>In case you're interested (or only want part of the functionality), I'll explain the things I changed.</p><p>In <code>{{#*inline "expression"}}</code> I added</p><pre class="language-handlebars"><code class="language-handlebars"><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#if</span> <span class="token variable">modeTermKana</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>	<span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#if</span> <span class="token variable">definition</span><span class="token punctuation">.</span><span class="token variable">reading</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#each</span> <span class="token punctuation">(</span><span class="token variable">pitchCategories</span> <span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>		<span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#if</span> <span class="token punctuation">@</span><span class="token variable">first</span><span class="token delimiter punctuation">}}</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">.</span><span class="token delimiter punctuation">}}</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br>		<span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/each</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">definition</span><span class="token punctuation">.</span><span class="token variable">reading</span><span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><br>	<span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">else</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#each</span> <span class="token punctuation">(</span><span class="token variable">pitchCategories</span> <span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>		<span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#if</span> <span class="token punctuation">@</span><span class="token variable">first</span><span class="token delimiter punctuation">}}</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">.</span><span class="token delimiter punctuation">}}</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br>		<span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/each</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">definition</span><span class="token punctuation">.</span><span class="token variable">expression</span><span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><br>	<span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/if</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">else</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#each</span> <span class="token punctuation">(</span><span class="token variable">pitchCategories</span> <span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>		<span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#if</span> <span class="token punctuation">@</span><span class="token variable">first</span><span class="token delimiter punctuation">}}</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">.</span><span class="token delimiter punctuation">}}</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br>		<span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/each</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">definition</span><span class="token punctuation">.</span><span class="token variable">expression</span><span class="token delimiter punctuation">}}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><br><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/if</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span></code></pre><p>This is the part that wraps the expression in the class for the pitch pattern. In order to get the actual name of the pitch pattern I added:</p><pre class="language-handlebars"><code class="language-handlebars"><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#*inline</span> <span class="token string">"pitch-accent-categories"</span><span class="token delimiter punctuation">}}</span></span><br>    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#each</span> <span class="token punctuation">(</span><span class="token variable">pitchCategories</span> <span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#if</span> <span class="token punctuation">@</span><span class="token variable">first</span><span class="token delimiter punctuation">}}</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">.</span><span class="token delimiter punctuation">}}</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/if</span><span class="token delimiter punctuation">}}</span></span><br>    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/each</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/inline</span><span class="token delimiter punctuation">}}</span></span></code></pre><p>This code comes from <a href="https://github.com/FooSoft/yomichan/blob/master/docs/templates.md">yomichan's template doc</a>.</p><p>If you use <code>{pitch-accents}</code> for furigana, and there's no pitch data found in your dictionary, it will say something like "No Pitch Data Found" by default. In order to show plain furigana instead, I changed the <code>{{~else~}}</code> clause of <code>{{#*inline "pitch-accent-list"}}</code> to be:</p><pre class="language-handlebars"><code class="language-handlebars"><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">else</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>	<span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">definition</span><span class="token punctuation">.</span><span class="token variable">reading</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/if</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span></code></pre><p>I wanted the <code>{sentence}</code> field on my card to not contain any whitespace, and I also wanted to strip out parenthesis, as well as any text within them. This is because anime subtitles will often put names inside of parenthesis, or furigana (that doesn't render properly).</p><p>To accomplish this I edited <code>{{#*inline "cloze-prefix"}}</code> and <code>{{#*inline "cloze-suffix"}}</code> to look like this:</p><pre class="language-handlebars"><code class="language-handlebars"><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#*inline</span> <span class="token string">"cloze-prefix"</span><span class="token delimiter punctuation">}}</span></span><br>    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#if</span> <span class="token variable">definition</span><span class="token punctuation">.</span><span class="token variable">cloze</span><span class="token delimiter punctuation">}}</span></span><br>        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#regexReplace</span> <span class="token string">"(（.*）| \(.*\)|　*|\s+)*"</span> <span class="token string">""</span><span class="token delimiter punctuation">}}</span></span>     <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">definition</span><span class="token punctuation">.</span><span class="token variable">cloze</span><span class="token punctuation">.</span><span class="token variable">prefix</span><span class="token delimiter punctuation">}}</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/regexReplace</span><span class="token delimiter punctuation">}}</span></span><br>    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/inline</span><span class="token delimiter punctuation">}}</span></span></code></pre><pre class="language-handlebars"><code class="language-handlebars"><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#*inline</span> <span class="token string">"cloze-suffix"</span><span class="token delimiter punctuation">}}</span></span><br>    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#if</span> <span class="token variable">definition</span><span class="token punctuation">.</span><span class="token variable">cloze</span><span class="token delimiter punctuation">}}</span></span><br>        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#regexReplace</span> <span class="token string">"(（.*）| \(.*\)|　*|\s+)*"</span> <span class="token string">""</span><span class="token delimiter punctuation">}}</span></span>     <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">definition</span><span class="token punctuation">.</span><span class="token variable">cloze</span><span class="token punctuation">.</span><span class="token variable">suffix</span><span class="token delimiter punctuation">}}</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/regexReplace</span><span class="token delimiter punctuation">}}</span></span><br>    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/if</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/inline</span><span class="token delimiter punctuation">}}</span></span></code></pre><p>Finally, I also use <code>Aquafina water bottle#3026</code>'s <a href="https://github.com/Aquafina-water-bottle/JP-Resources/tree/merge_freq_handlebars#how-to">frequency handlebars</a>. This strips away the text from your frequency lists, and then gives you the one with the smallest number. That way you can sort your cards by frequency.</p><p>You can also mess with the options at the top if you would prefer a different sorting method or default value (value if there is no entry in your frequency dicionaries).</p><pre class="language-handlebars"><code class="language-handlebars"><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">#*inline</span> <span class="token string">"freq"</span><span class="token delimiter punctuation">}}</span></span><br>    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token punctuation">!</span> <span class="token variable">Frequency</span> <span class="token variable">sorting</span> <span class="token variable">from</span> <span class="token variable">https</span><span class="token punctuation">:</span><span class="token punctuation">/</span><span class="token punctuation">/</span><span class="token variable">github</span><span class="token punctuation">.</span><span class="token variable">com</span><span class="token punctuation">/</span><span class="token variable">MarvNC</span><span class="token punctuation">/</span><span class="token variable">JP-Resources</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token punctuation">!</span> <span class="token variable">v23</span><span class="token punctuation">.</span><span class="token number">01.31</span><span class="token number">.2</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#scope</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token punctuation">!</span> <span class="token variable">Options</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#set</span> <span class="token string">"opt-ignored-freq-dict-regex"</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span> ^(JLPT_Level)$ <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/set</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">set</span> <span class="token string">"opt-no-freq-default-value"</span> <span class="token number">999999</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">set</span> <span class="token string">"opt-freq-sorting-method"</span> <span class="token string">"min"</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span> <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token punctuation">!</span> <span class="token string">"min"</span><span class="token punctuation">,</span> <span class="token string">"first"</span><span class="token punctuation">,</span> <span class="token string">"avg"</span><span class="token punctuation">,</span> <span class="token string">"harmonic"</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token punctuation">!</span> <span class="token variable">End</span> <span class="token variable">of</span> <span class="token variable">options</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><br><br>        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token punctuation">!</span> <span class="token variable">Do</span> <span class="token variable">not</span> <span class="token variable">change</span> <span class="token variable">the</span> <span class="token variable">code</span> <span class="token variable">below</span> <span class="token variable">unless</span> <span class="token variable">you</span> <span class="token variable">know</span> <span class="token variable">what</span> <span class="token variable">you</span> <span class="token variable">are</span> <span class="token variable">doing</span><span class="token punctuation">.</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">set</span> <span class="token string">"result-freq"</span> <span class="token variable">-</span><span class="token number">1</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span> <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token punctuation">!</span> <span class="token variable">-</span><span class="token number">1</span> <span class="token variable">is</span> <span class="token variable">chosen</span> <span class="token variable">because</span> <span class="token variable">no</span> <span class="token variable">frequency</span> <span class="token variable">dictionaries</span> <span class="token variable">should</span> <span class="token variable">have</span> <span class="token variable">an</span> <span class="token variable">entry</span> <span class="token variable">as</span> <span class="token variable">-</span><span class="token number">1</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">set</span> <span class="token string">"t"</span> <span class="token number">1</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><br>        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#each</span> <span class="token variable">definition</span><span class="token punctuation">.</span><span class="token variable">frequencies</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><br>            <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token punctuation">!</span> <span class="token variable">rx-match-ignored-freq</span> <span class="token variable">is</span> <span class="token variable">not</span> <span class="token variable">empty</span> <span class="token variable">if</span> <span class="token variable">ignored</span> <span class="token punctuation">&lt;</span><span class="token punctuation">=</span><span class="token punctuation">&gt;</span> <span class="token variable">rx-match-ignored-freq</span> <span class="token variable">is</span> <span class="token variable">empty</span> <span class="token variable">if</span> <span class="token variable">not</span> <span class="token variable">ignored</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>            <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#set</span> <span class="token string">"rx-match-ignored-freq"</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#regexMatch</span> <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"opt-ignored-freq-dict-regex"</span><span class="token punctuation">)</span> <span class="token string">"gu"</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token variable">this</span><span class="token punctuation">.</span><span class="token variable">dictionary</span><span class="token delimiter punctuation">}}</span></span><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/regexMatch</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>            <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/set</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>            <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#if</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"==="</span> <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"rx-match-ignored-freq"</span><span class="token punctuation">)</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><br>                <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#if</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"==="</span> <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"opt-freq-sorting-method"</span><span class="token punctuation">)</span> <span class="token string">"min"</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#if</span><br>                        <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"||"</span><br>                            <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"==="</span> <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"result-freq"</span><span class="token punctuation">)</span> <span class="token variable">-</span><span class="token number">1</span><span class="token punctuation">)</span><br>                            <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"&gt;"</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"+"</span> <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"result-freq"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"+"</span> <span class="token punctuation">(</span><span class="token variable">regexMatch</span> <span class="token string">"\d"</span> <span class="token string">"g"</span> <span class="token variable">this</span><span class="token punctuation">.</span><span class="token variable">frequency</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>                        <span class="token punctuation">)</span><br>                    <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">set</span> <span class="token string">"result-freq"</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"+"</span> <span class="token punctuation">(</span><span class="token variable">regexMatch</span> <span class="token string">"\d"</span> <span class="token string">"g"</span> <span class="token variable">this</span><span class="token punctuation">.</span><span class="token variable">frequency</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/if</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><br>                <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">else</span> <span class="token variable">if</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"==="</span> <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"opt-freq-sorting-method"</span><span class="token punctuation">)</span> <span class="token string">"first"</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#if</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"==="</span> <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"result-freq"</span><span class="token punctuation">)</span> <span class="token variable">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">set</span> <span class="token string">"result-freq"</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"+"</span> <span class="token punctuation">(</span><span class="token variable">regexMatch</span> <span class="token string">"\d"</span> <span class="token string">"g"</span> <span class="token variable">this</span><span class="token punctuation">.</span><span class="token variable">frequency</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/if</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><br>                <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">else</span> <span class="token variable">if</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"==="</span> <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"opt-freq-sorting-method"</span><span class="token punctuation">)</span> <span class="token string">"avg"</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><br>                    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#if</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"==="</span> <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"result-freq"</span><span class="token punctuation">)</span> <span class="token variable">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">set</span> <span class="token string">"result-freq"</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"+"</span> <span class="token punctuation">(</span><span class="token variable">regexMatch</span> <span class="token string">"\d"</span> <span class="token string">"g"</span> <span class="token variable">this</span><span class="token punctuation">.</span><span class="token variable">frequency</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">else</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token punctuation">!</span> <span class="token variable">iterative</span> <span class="token variable">mean</span> <span class="token variable">formula</span><span class="token punctuation">:</span> <span class="token variable">$S_</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token variable">t</span><span class="token punctuation">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token punctuation">=</span> <span class="token variable">S_t</span> <span class="token punctuation">+</span> <span class="token punctuation">\</span><span class="token variable">frac</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token variable">t</span><span class="token punctuation">+</span><span class="token number">1</span><span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token variable">x</span> <span class="token variable">-</span> <span class="token variable">S_t</span><span class="token punctuation">)</span><span class="token variable">$</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">set</span> <span class="token string">"result-freq"</span><br>                            <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"+"</span><br>                                <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"result-freq"</span><span class="token punctuation">)</span><br>                                <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"/"</span><br>                                    <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"-"</span><br>                                        <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"+"</span> <span class="token punctuation">(</span><span class="token variable">regexMatch</span> <span class="token string">"\d"</span> <span class="token string">"g"</span> <span class="token variable">this</span><span class="token punctuation">.</span><span class="token variable">frequency</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>                                        <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"result-freq"</span><span class="token punctuation">)</span><br>                                    <span class="token punctuation">)</span><br>                                    <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"t"</span><span class="token punctuation">)</span><br>                                <span class="token punctuation">)</span><br>                            <span class="token punctuation">)</span><br>                        <span class="token delimiter punctuation">}}</span></span><br>                    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/if</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">set</span> <span class="token string">"t"</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"+"</span> <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"t"</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><br>                <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">else</span> <span class="token variable">if</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"==="</span> <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"opt-freq-sorting-method"</span><span class="token punctuation">)</span> <span class="token string">"harmonic"</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#if</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"&gt;"</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"+"</span> <span class="token punctuation">(</span><span class="token variable">regexMatch</span> <span class="token string">"\d"</span> <span class="token string">"g"</span> <span class="token variable">this</span><span class="token punctuation">.</span><span class="token variable">frequency</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span> <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token punctuation">!</span> <span class="token variable">ensures</span> <span class="token variable">only</span> <span class="token variable">positive</span> <span class="token variable">numbers</span> <span class="token variable">are</span> <span class="token variable">used</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#if</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"==="</span> <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"result-freq"</span><span class="token punctuation">)</span> <span class="token variable">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                            <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">set</span> <span class="token string">"result-freq"</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"/"</span> <span class="token number">1</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"+"</span> <span class="token punctuation">(</span><span class="token variable">regexMatch</span> <span class="token string">"\d"</span> <span class="token string">"g"</span> <span class="token variable">this</span><span class="token punctuation">.</span><span class="token variable">frequency</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">else</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                            <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">set</span> <span class="token string">"result-freq"</span><br>                                <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"+"</span><br>                                    <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"result-freq"</span><span class="token punctuation">)</span><br>                                    <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"/"</span> <span class="token number">1</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"+"</span> <span class="token punctuation">(</span><span class="token variable">regexMatch</span> <span class="token string">"\d"</span> <span class="token string">"g"</span> <span class="token variable">this</span><span class="token punctuation">.</span><span class="token variable">frequency</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>                                <span class="token punctuation">)</span><br>                            <span class="token delimiter punctuation">}}</span></span><br>                            <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">set</span> <span class="token string">"t"</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"+"</span> <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"t"</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/if</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/if</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><br>                <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">else</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>                    (INVALID opt-freq-sorting-method value)<br>                <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/if</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><br>            <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/if</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><br>        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/each</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><br>        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">#if</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"==="</span> <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"result-freq"</span><span class="token punctuation">)</span> <span class="token variable">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>            <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">set</span> <span class="token string">"result-freq"</span> <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"opt-no-freq-default-value"</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span> <span class="token variable">else</span> <span class="token variable">if</span> <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"==="</span> <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"opt-freq-sorting-method"</span><span class="token punctuation">)</span> <span class="token string">"harmonic"</span><span class="token punctuation">)</span> <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>            <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">set</span> <span class="token string">"result-freq"</span><br>                <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"*"</span><br>                    <span class="token punctuation">(</span><span class="token variable">op</span> <span class="token string">"/"</span> <span class="token number">1</span> <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"result-freq"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>                    <span class="token punctuation">(</span><span class="token variable">get</span> <span class="token string">"t"</span><span class="token punctuation">)</span><br>                <span class="token punctuation">)</span><br>            <span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/if</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><br>        <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token variable">get</span> <span class="token string">"result-freq"</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br>    <span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token punctuation">~</span><span class="token block keyword">/scope</span><span class="token punctuation">~</span><span class="token delimiter punctuation">}}</span></span><br><span class="token handlebars language-handlebars"><span class="token delimiter punctuation">{{</span><span class="token block keyword">/inline</span><span class="token delimiter punctuation">}}</span></span></code></pre><div class="heading-wrapper h2"><h2 id="order-cards-by-frequency">Order Cards By Frequency</h2><a class="anchor" href="#order-cards-by-frequency" aria-labelledby="order-cards-by-frequency"><span hidden="">#</span></a></div><p>As long as you're using my Yomichan <a href="#yomichan-handlebars">handlebars</a> (or are using my Yomichan settings), the frequency field on your cards should just contain a number. You can then use the <a href="https://ankiweb.net/shared/info/757527607">AutoReorder</a> addon to automatically reorder all the new cards in your collection based on the frequency.</p><p>After installing, you'll want to go to <code>addons &gt; autoreorder &gt; config</code>, which should give you something like the below image:</p><p><picture><source type="image/avif" srcset="/images/auto_reorder_settings-9HKziFr476-150w.avif 150w, /images/auto_reorder_settings-9HKziFr476-300w.avif 300w, /images/auto_reorder_settings-9HKziFr476-450w.avif 450w, /images/auto_reorder_settings-9HKziFr476-600w.avif 600w, /images/auto_reorder_settings-9HKziFr476-750w.avif 750w, /images/auto_reorder_settings-9HKziFr476-900w.avif 900w, /images/auto_reorder_settings-9HKziFr476-1050w.avif 1050w, /images/auto_reorder_settings-9HKziFr476-1200w.avif 1200w, /images/auto_reorder_settings-9HKziFr476-1350w.avif 1350w" sizes="100vw"><source type="image/webp" srcset="/images/auto_reorder_settings-9HKziFr476-150w.webp 150w, /images/auto_reorder_settings-9HKziFr476-300w.webp 300w, /images/auto_reorder_settings-9HKziFr476-450w.webp 450w, /images/auto_reorder_settings-9HKziFr476-600w.webp 600w, /images/auto_reorder_settings-9HKziFr476-750w.webp 750w, /images/auto_reorder_settings-9HKziFr476-900w.webp 900w, /images/auto_reorder_settings-9HKziFr476-1050w.webp 1050w, /images/auto_reorder_settings-9HKziFr476-1200w.webp 1200w, /images/auto_reorder_settings-9HKziFr476-1350w.webp 1350w" sizes="100vw"><source type="image/png" srcset="/images/auto_reorder_settings-9HKziFr476-150w.png 150w, /images/auto_reorder_settings-9HKziFr476-300w.png 300w, /images/auto_reorder_settings-9HKziFr476-450w.png 450w, /images/auto_reorder_settings-9HKziFr476-600w.png 600w, /images/auto_reorder_settings-9HKziFr476-750w.png 750w, /images/auto_reorder_settings-9HKziFr476-900w.png 900w, /images/auto_reorder_settings-9HKziFr476-1050w.png 1050w, /images/auto_reorder_settings-9HKziFr476-1200w.png 1200w, /images/auto_reorder_settings-9HKziFr476-1350w.png 1350w" sizes="100vw"><source type="image/jpeg" srcset="/images/auto_reorder_settings-9HKziFr476-150w.jpeg 150w, /images/auto_reorder_settings-9HKziFr476-300w.jpeg 300w, /images/auto_reorder_settings-9HKziFr476-450w.jpeg 450w, /images/auto_reorder_settings-9HKziFr476-600w.jpeg 600w, /images/auto_reorder_settings-9HKziFr476-750w.jpeg 750w, /images/auto_reorder_settings-9HKziFr476-900w.jpeg 900w, /images/auto_reorder_settings-9HKziFr476-1050w.jpeg 1050w, /images/auto_reorder_settings-9HKziFr476-1200w.jpeg 1200w, /images/auto_reorder_settings-9HKziFr476-1350w.jpeg 1350w" sizes="100vw"><img src="/images/auto_reorder_settings-9HKziFr476-750w.jpeg" width="1350" height="578" alt="auto reorder config" loading="lazy" decoding="async"></picture></p><p>You'll want to use the following config:</p><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>    <span class="token property">"search_to_sort"</span><span class="token operator">:</span> <span class="token string">"\"deck:Study::01. Japanese::02. Mining\" is:new"</span><span class="token punctuation">,</span><br>    <span class="token property">"sort_field"</span><span class="token operator">:</span> <span class="token string">"frequency"</span><span class="token punctuation">,</span><br>    <span class="token property">"sort_reverse"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>    <span class="token property">"shift_existing"</span><span class="token operator">:</span> <span class="token boolean">true</span><br><span class="token punctuation">}</span></code></pre><p>For the <code>search_to_sort</code> field you'll want to replace <code>Study::01. Japanese::02. Mining</code> with the name of your deck. To easily get the name of your deck, you can rename your deck, and then copy the text in the popup.</p><p><picture><source type="image/avif" srcset="/images/deck_name-tAuPvPGmEU-150w.avif 150w, /images/deck_name-tAuPvPGmEU-300w.avif 300w" sizes="100vw"><source type="image/webp" srcset="/images/deck_name-tAuPvPGmEU-150w.webp 150w, /images/deck_name-tAuPvPGmEU-300w.webp 300w" sizes="100vw"><source type="image/png" srcset="/images/deck_name-tAuPvPGmEU-150w.png 150w, /images/deck_name-tAuPvPGmEU-300w.png 300w" sizes="100vw"><source type="image/jpeg" srcset="/images/deck_name-tAuPvPGmEU-150w.jpeg 150w, /images/deck_name-tAuPvPGmEU-300w.jpeg 300w" sizes="100vw"><img src="/images/deck_name-tAuPvPGmEU-300w.jpeg" width="300" height="90" alt="rename deck popup" loading="lazy" decoding="async"></picture></p><p>Once you're done, restart Anki.</p><p>The AutoReorder addon will automatically reposition your new cards every time you re-open Anki. However, if you leave Anki open 24/7 like I do, you can also go to <code>Tools &gt; Reposition Cards</code> to do it manually. I generally do this before every review session.</p><div class="heading-wrapper h2"><h2 id="migrating-from-previous-versions">Migrating From Previous Versions</h2><a class="anchor" href="#migrating-from-previous-versions" aria-labelledby="migrating-from-previous-versions"><span hidden="">#</span></a></div><p>If you're upgrading from a previous version of my note type, there may be extra steps you need to do to convert your cards to the newer version.</p><div class="heading-wrapper h3"><h3 id="migrating-from-v23">Migrating From V2.3</h3><a class="anchor" href="#migrating-from-v23" aria-labelledby="migrating-from-v23"><span hidden="">#</span></a></div><p>The biggest change between V2.3 and V2.4 is how Yomichan will export frequency information (to allow you to sort by the frequency field). Because of this, as well as new styling, you need update the frequency of all of your old cards in order to convert to the updated note type. Luckily, <code>Aquafina water bottle#3026</code> has written a script to do that for you automatically.</p><p>To do this you'll want to follow the instructions on <a href="https://github.com/MarvNC/JP-Resources#backfilling-old-cards">Marv's github page</a> on how to backfill old cards. Make sure to follow the command line version.</p><p>Before running any commands, I'd recommend backing up your Anki collection. You can do this within Anki by doing <code>File &gt; Create Backup</code>.</p><p>When following his instructions, you'll want to follow his first 3 recommended commands:</p><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> clone <span class="token string">"https://github.com/MarvNC/JP-Resources.git"</span><br><span class="token builtin class-name">cd</span> JP-Resources<br><span class="token builtin class-name">cd</span> frequency</code></pre><p>However, when you get to the step to actually run the backfill script, you'll want to use the following command (not listed on his page):</p><pre class="language-bash"><code class="language-bash">python backfill.py <span class="token string">"wordDictionaryForm"</span> --freq-field <span class="token string">"frequency"</span></code></pre><p>This will update any of my previous note types to have the proper frequency information on them.</p><p>If it worked, your cards' frequency field should look like this</p><p><picture><source type="image/avif" srcset="/images/frequency_number-u_3UcTRTQJ-150w.avif 150w" sizes="100vw"><source type="image/webp" srcset="/images/frequency_number-u_3UcTRTQJ-150w.webp 150w" sizes="100vw"><source type="image/png" srcset="/images/frequency_number-u_3UcTRTQJ-150w.png 150w" sizes="100vw"><source type="image/jpeg" srcset="/images/frequency_number-u_3UcTRTQJ-150w.jpeg 150w" sizes="100vw"><img src="/images/frequency_number-u_3UcTRTQJ-150w.jpeg" width="150" height="82" alt="frequency number" loading="lazy" decoding="async"></picture></p><p>If that worked correctly for you, you'll then want to update to my new Yomichan settings. If you don't want to copy all my settings, you can also just replace the <a href="https://gist.github.com/cademcniven/dde2597e759ab2c9ab17a4deac673f33">Anki Template settings</a> so that future cards have frequency that matches this format.</p><p>After that, you can just select all of your V2.3 cards, and <code>Change Note Type</code> to 2.4. The <code>word</code> field has been removed, and some fields have been reordered, but as long as you just match the names of the fields it should be fine.</p><p>Finally, follow the instructions for <a href="#order-cards-by-frequency">Ordering Cards By Frequency</a></p><div class="heading-wrapper h3"><h3 id="migrating-from-versions-prior-to-v23">Migrating From Versions Prior to V2.3</h3><a class="anchor" href="#migrating-from-versions-prior-to-v23" aria-labelledby="migrating-from-versions-prior-to-v23"><span hidden="">#</span></a></div><p>If you have a prior version of my note type, <strong>do not</strong> change your cards to the new version. Instead, import the new version and make your future cards use this note type.</p><p>The reason is that older versions used a script on the card to highlight the word in the sentence. However, the new version has yomichan send over the sentence with the word pre-highlighted. This means that if you changed your old cards to the new note type, the highlight functionality would be broken for all of those cards.</p><p>If you're fine with that, feel free to change your old cards to the new version. It's also possible to manually re-add that highlight script and edit the yomichan field to be the same as before. I don't really recommend this, but you do you.</p><p>If you're using my old yomichan settings, you'll also want to <a href="https://mega.nz/file/qBUkVaCD#9hJyeOCLHacjagScnV0syNA7npjJPhAW3x4xaRd-diM">import my new settings</a> or just read the other parts of this page to piece together the pieces you need (see the field explanations and handlebars settings).</p><p>My yomichan settings use the <a href="https://learnjapanese.moe/yomichan/#offline-audio-server">offline audio server</a> as described by TMW, so if you aren't using that, you'll want to edit your audio sources to add back online sources.</p><p>If you're using my note type in conjunction with <a href="/posts/20210703">animebook</a>, you'll want to import my new <a href="https://mega.nz/file/mB9mBbrL#AUzdAT7uRrYYCrcEbMfyXTTpMvOqAlvVARA1wMKfXxs">animebook settings</a>.</p><p>The only change to the animebook settings is that it will only add a sentence to the card if the sentence field is blank. Feel free to just change that setting instead of re-importing if you want.</p><div class="heading-wrapper h2"><h2 id="changelog">Changelog</h2><a class="anchor" href="#changelog" aria-labelledby="changelog"><span hidden="">#</span></a></div><ul><li><p>01/28/2023</p><ul><li>Target word, sentence, and definition are now editable by default if you have the <a href="https://ankiweb.net/shared/info/385888438">Edit Field During Review (Cloze)</a> addon</li><li>Made it easier to toggle pitch coloring</li><li>Removed the now redundant "word" field</li><li>Reordered fields so that the ones that are edited the most are at the top</li><li>Added support for conditional styling for NSFW images</li><li>Updated styling for frequency</li><li>Added rounded edges to images and a slight shadow because <code>derpydoopie#8988</code> wanted it to look "more modern" :)</li><li>Updated max image width to be a multiple of 1920</li><li>Fixed a bug where the <a href="https://github.com/cademcniven/cademcniven.com-dev/issues/1">reading wouldn't display properly on Mac OS</a> (thanks to loaphage!)</li><li>If you have 3+ pitch dictionaries, only the first 2 pitch graphs are shown now</li><li>If you have multiple frequency lists, my yomichan settings will now only export the one with the lowest frequency (so you can now sort cards by frequency)</li><li>Fixed bug where yomichan wasn't stripping all of the spaces/parenthesis from the sentence</li><li>Images will no longer appear larger than the width of the window</li><li>Cards will no longer exceed 1200px in width, and will be padded with whitespace on both sides if the window size exceeds that (thanks to <code>DaNautics#8833</code> for the idea)</li><li>Increased the font size of Japanese text inside the definition (thanks to <code>derpydoopie#8988</code>)</li><li>Disabled pitch graphs, as the information was redundant with pitch marking on the furigana. This can be reanabled in the card's back template</li></ul></li><li><p>6/18/2022</p><ul><li>Rewrote <a href="/projects/kanjihover">Kanji Hover</a> and re-enabled it in the note type</li></ul></li><li><p>6/17/2022</p><ul><li>Changed dictionary centering css to be on card instead of in handlebars</li><li>Changed pitch graph coloring css to be on card instead of in handlebars</li><li>Rearranged the order of fields so that <code>wordDictionaryForm</code> appears before <code>word</code>. This change allows for proper detection of duplicates.</li><li>Changed image to be on the back only</li><li>Added pitch info to furigana</li><li>Added regex patterns to remove whitespace and text within parenthasis from the sentence.</li><li>Changed the font to <a href="https://www.morisawa.co.jp/products/fonts/bizplus/">BIZ UD Mincho</a></li></ul></li><li><p>12/4/2021</p><ul><li>Updated pitch accent colors.</li><li>Removed pitch accent colors from the wordDictionaryForm, and instead made a colored square next to the word.</li><li>Added style overrides to bold text, to accomodate proper noun mining and definition highlighting.</li></ul></li><li><p>7/10/2021</p><ul><li>Added pitch accent coloring.</li><li>sentenceAudio replay button is now correctly repositioned when the card has no wordAudio.</li></ul></li></ul></div></main></body></html>